(this["webpackJsonpsd-0x-block15-project-frontend-online-store"]=this["webpackJsonpsd-0x-block15-project-frontend-online-store"]||[]).push([[0],{24:function(t,e,a){t.exports=a(39)},29:function(t,e,a){},36:function(t,e,a){},37:function(t,e,a){},38:function(t,e,a){},39:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(21),o=a.n(c),i=(a(29),a(13)),l=a(5),u=a(1),s=a(2),p=a(4),d=a(3),m=a(6),h=a.n(m),v=a(12),f=a(8);function b(){return g.apply(this,arguments)}function g(){return(g=Object(v.a)(h.a.mark((function t(){var e,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://api.mercadolibre.com/sites/MLB/categories",t.next=3,fetch("https://api.mercadolibre.com/sites/MLB/categories");case 3:return e=t.sent,t.next=6,e.json();case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(t,e){return E.apply(this,arguments)}function E(){return(E=Object(v.a)(h.a.mark((function t(e,a){var n,r,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="https://api.mercadolibre.com/sites/MLB/search?category=".concat(e,"&q=").concat(a),t.next=3,fetch(n);case 3:return r=t.sent,t.next=6,r.json();case 6:return c=t.sent,t.abrupt("return",c);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var y=a(22),j=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var t=this.props,e=t.onClick,a=t.nameButton,n=t.testId;return r.a.createElement("button",{"data-testid":n,type:"button",onClick:e},a)}}]),a}(n.Component),C=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"handleShipping",value:function(t){if(!0===t.free_shipping)return r.a.createElement("p",{"data-testid":"free-shipping"},"Frete Gr\xe1tis")}},{key:"render",value:function(){var t=this.props,e=t.product,a=t.search,n=t.onClick,c=e.title,o=e.thumbnail,i=e.price,l=e.id,u=e.shipping;return r.a.createElement("div",{className:"product-list-each"},r.a.createElement(y.Link,{to:{pathname:"/Block14-Project-Agile/product-detail/".concat(l),state:{busca:a}}},r.a.createElement("div",{"data-testid":"product-detail-link"},r.a.createElement("div",{"data-testid":"product"},r.a.createElement("h5",null,c),r.a.createElement("img",{src:o,alt:"fotografia do produto"}),this.handleShipping(u)),r.a.createElement("p",null,r.a.createElement("span",null,"R$: ".concat(i))))),r.a.createElement("p",null,r.a.createElement(j,{testId:"product-add-to-cart",nameButton:"Add to Cart",onClick:n})))}}]),a}(n.Component),O=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h4",null,"Carregando..."))}}]),a}(n.Component),S=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var t=this.props,e=t.category,a=t.id,n=t.onClick;return r.a.createElement("label",{htmlFor:a},r.a.createElement("input",{name:a,type:"button","data-testid":"category",id:a,value:e,onClick:n,className:"category-input"}))}}]),a}(n.Component),B=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){var t;return Object(u.a)(this,a),(t=e.call(this)).state={list:[],loading:!1},t}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var t=Object(v.a)(h.a.mark((function t(){var e,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=b,t.next=3,e();case 3:a=t.sent,this.setNewState(a);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setNewState",value:function(t){this.setState({list:t,loading:!0})}},{key:"render",value:function(){var t=this.props.onClick,e=this.state,a=e.list;return!1===e.loading?r.a.createElement(O,null):r.a.createElement("ul",null,a.map((function(e){return r.a.createElement("p",{key:e.id},r.a.createElement(S,{id:e.id,category:e.name,onClick:t}))})))}}]),a}(n.Component),I=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var t=this.props,e=t.onChange,a=t.placeholder;return r.a.createElement("input",{id:"query-input","data-testid":"query-input",type:"text",onChange:e,placeholder:a})}}]),a}(n.Component),w=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){var t;return Object(u.a)(this,a),(t=e.call(this)).onClickButton=t.onClickButton.bind(Object(f.a)(t)),t.handleInput=t.handleInput.bind(Object(f.a)(t)),t.onClickCategory=t.onClickCategory.bind(Object(f.a)(t)),t.resetState=t.resetState.bind(Object(f.a)(t)),t.onClickCart=t.onClickCart.bind(Object(f.a)(t)),t.state={valueInput:"",categoryId:"",products:[],cart:JSON.parse(localStorage.getItem("cart"))||[]},t}return Object(s.a)(a,[{key:"onClickCart",value:function(t){var e=this.state.cart;e.push(t),this.setState({cart:e}),localStorage.setItem([t.id],JSON.stringify(e))}},{key:"onClickCategory",value:function(){var t=Object(v.a)(h.a.mark((function t(e){var a,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.state.valueInput,t.next=3,k(e,a);case 3:n=t.sent,this.setState({categoryId:e,products:n.results});case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"onClickButton",value:function(){var t=Object(v.a)(h.a.mark((function t(e){var a,n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.resetState();case 2:return a=this.state.categoryId,t.next=5,k(a,e);case 5:n=t.sent,r=n.results,this.setState({valueInput:e,products:r});case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"handleInput",value:function(t){var e=t.target.value;this.setState({valueInput:e})}},{key:"resetState",value:function(){var t=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.setState({categoryId:""});case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.state,a=e.products,n=e.valueInput;return r.a.createElement("div",null,r.a.createElement("div",{className:"product-list-container"},r.a.createElement("div",{className:"product-list-input"},r.a.createElement(I,{onChange:this.handleInput,placeholder:"Digite algum termo de pesquisa ou escolha uma categoria."})),r.a.createElement("div",{className:"product-list-button"},r.a.createElement(j,{testId:"query-button",nameButton:"Buscar",onClick:function(){return t.onClickButton(n)}}))),r.a.createElement("section",{className:"product-list-section"},r.a.createElement("section",{className:"product-list-categories"},r.a.createElement("h4",null,"Categorias"),r.a.createElement(B,{onClick:function(e){return t.onClickCategory(e.target.name)}})),r.a.createElement("section",{className:"product-list-all-products"},a.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(C,{product:e,search:a,onClick:function(){return t.onClickCart(e)}}))})))))}}]),a}(n.Component),N=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"homepage-container"},r.a.createElement("link",{rel:"stylesheet",href:"https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css",crossOrigin:"anonymous"}),r.a.createElement("header",null,r.a.createElement("p",{hidden:!0,"data-testid":"home-initial-message"},"Digite algum termo de pesquisa ou escolha uma categoria.")),r.a.createElement("main",{className:"homepage-main"},r.a.createElement("nav",{className:"homepage-nav"},r.a.createElement("h2",null,"Projeto Agile Store"),r.a.createElement(i.b,{to:"/Block14-Project-Agile/shopping-cart"},r.a.createElement("button",{"data-testid":"shopping-cart-button",type:"button"},r.a.createElement("i",{className:"fa fa-shopping-cart"})))),r.a.createElement(w,null)))}}]),a}(n.Component),x=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){var t;return Object(u.a)(this,a),(t=e.call(this)).decrease=t.decrease.bind(Object(f.a)(t)),t.increase=t.increase.bind(Object(f.a)(t)),t.state={quantity:1},t}return Object(s.a)(a,[{key:"decrease",value:function(){var t=this.state.quantity;t>0?this.setState({quantity:t-1}):this.setState({quantity:0})}},{key:"increase",value:function(){var t=this.state.quantity;this.setState({quantity:t+1})}},{key:"render",value:function(){var t=this.state.quantity,e=this.props,a=e.product,n=e.ButtonDel,c=a.title,o=a.price,i=a.thumbnail;return r.a.createElement("div",null,r.a.createElement("div",{className:"shopping-list-each"},r.a.createElement("h4",{"data-testid":"shopping-cart-product-name"},c),r.a.createElement("div",null,r.a.createElement("img",{src:i,alt:c}),r.a.createElement("p",null,"R$ ".concat(parseFloat(t*o).toFixed(2)))),r.a.createElement("p",{"data-testid":"shopping-cart-product-quantity"},t)),r.a.createElement(j,{testId:"product-decrease-quantity",onClick:this.decrease,nameButton:"-"}),n,r.a.createElement(j,{testId:"product-increase-quantity",onClick:this.increase,nameButton:"+"}))}}]),a}(n.Component),q=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(u.a)(this,a),(t=e.call(this)).clearCart=t.clearCart.bind(Object(f.a)(t)),t.removeCart=t.removeCart.bind(Object(f.a)(t));var n=Object.entries(localStorage);return t.state={cart:n||[]},t}return Object(s.a)(a,[{key:"clearCart",value:function(){localStorage.clear(),document.location.reload()}},{key:"removeCart",value:function(t){var e=this.state.cart;console.log("antes",e);var a=e.map((function(e){return e.id!==t.id?e:localStorage.removeItem(e)}));console.log("depois",e),this.setState({cart:a})}},{key:"render",value:function(){var t,e=this,a=this.state.cart;return t=a.length>0?a.map((function(a){return void 0!==a?r.a.createElement(x,{key:a.id,product:a,ButtonDel:r.a.createElement(j,{testId:"button-remove",nameButton:"REMOVER",onClick:function(){return e.removeCart(a)}})}):t})):r.a.createElement("p",{"data-testid":"shopping-cart-empty-message"},"Seu carrinho est\xe1 vazio"),r.a.createElement("div",{className:"shopping-container"},r.a.createElement(i.b,{to:"/Block14-Project-Agile/"},"Home"),r.a.createElement("h1",null,"Meu Carrinho"),r.a.createElement("button",{type:"button",onClick:function(){return e.clearCart()}},"Limpar Carrinho"),r.a.createElement("div",{className:"shopping-list-section"},t),r.a.createElement("p",null,"Valor Total:"),r.a.createElement("button",{type:"button"},"Finalizar Compra"))}}]),a}(n.Component),A=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var t=this.props,e=t.product,a=t.onClick,n=e.title,c=e.thumbnail,o=e.price;return r.a.createElement("div",null,r.a.createElement(i.b,{to:"/Block14-Project-Agile/shopping-cart"},r.a.createElement("button",{"data-testid":"shopping-cart-button",type:"button"},"Cart")),r.a.createElement("div",{"data-testid":"product"},r.a.createElement("h5",{"data-testid":"product-detail-name"},n),r.a.createElement("img",{src:c,alt:"fotografia do produto"}),r.a.createElement("span",null,"R$: ".concat(o)),r.a.createElement("p",null,r.a.createElement(j,{testId:"product-detail-add-to-cart",nameButton:"Add to Cart",onClick:a}))))}}]),a}(n.Component),P=function(t){Object(p.a)(a,t);var e=Object(d.a)(a);function a(){var t;return Object(u.a)(this,a),(t=e.call(this)).onClickCart=t.onClickCart.bind(Object(f.a)(t)),t.state={cart:JSON.parse(localStorage.getItem("cart"))||[]},t}return Object(s.a)(a,[{key:"onClickCart",value:function(t){var e=this.state.cart;e.push(t),this.setState({cart:e}),localStorage.setItem("cart",JSON.stringify(e))}},{key:"render",value:function(){var t=this,e=this.props,a=e.match,n=e.location,c=a.params.idprod,o=n.state.busca.filter((function(t){return t.id===c}));return r.a.createElement("div",null,o.map((function(e){return r.a.createElement(A,{onClick:function(){return t.onClickCart(e)},product:e,key:e.id})})))}}]),a}(n.Component);a(36),a(37),a(38);var R=function(){return r.a.createElement(i.a,null,r.a.createElement(l.Switch,null,r.a.createElement(l.Route,{path:"/Block14-Project-Agile/product-detail/:idprod",render:function(t){return r.a.createElement(P,t)}}),r.a.createElement(l.Route,{path:"/Block14-Project-Agile/shopping-cart",component:q}),r.a.createElement(l.Route,{path:"/Block14-Project-Agile/",component:N})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.dd84a89c.chunk.js.map